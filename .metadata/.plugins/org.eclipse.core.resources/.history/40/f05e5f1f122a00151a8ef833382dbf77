// Leetcode 59	
// Spiral Matrix II
// https://leetcode.com/problems/spiral-matrix-ii/

// Given an integer n, generate a square matrix filled with elements from 1 to 
// n2 in spiral order.
// 
// For example,
// Given n = 3,
// 
// You should return the following matrix:
// [
//  [ 1, 2, 3 ],
//  [ 8, 9, 4 ],
//  [ 7, 6, 5 ]
// ]

import tester.Tester;

import java.util.*;

public class Solution {
    public int[][] generateMatrix(int n) {
    	n = Math.abs(n);
        int[][] matrix = new int[n][n];
        int number = 1;
        int start = 0; //(start, start) is the start position
        int end = n;   // 
        while(number <= n * n) {
            number = this.generateBorder(matrix, start, end, number);
            start++;
            end--;
        }
        return matrix;
    }
    
    // GIVEN: a square matrix, two ints represents two positions (start, start) 
    // and (end, end) marks a square, a number n
    // WHERE: 0 <= start && start <= end && end < matrix.length;
    // EFFECT: fill in the all elements on the border of the rectangle with 
    // value from n to n+1, n+2..., start from (start, start) in clockwise
    // direction
    // RETURNS: the number followed the last number fill in the matrix 
    public int generateBorder(int[][] matrix, int start, int end, int n) {
    	if(end == start) {
    		matrix[start][start] = n++;
    		return n;
    	}
    	else {
    		//@assert start < end;
    		for(int j = start; j <= end; j++) {
    			matrix[start][j] = n++;
    		}
    		for(int i = start + 1; i <= end; i++) {
    			matrix[i][end] = n++;
    		}
    		for(int j = end - 1; j >= start; j--) {
    			matrix[end][j] = n++;
    		}
    		for(int i = end - 1; i > start; i--) {
    			matrix[i][start] = n++;
    		}
    		return n;
    	}
    }
}

class SolutionExamples {
	Solution s = new Solution();
	
	// tests for method generateMatrix()
	boolean testGenerateMatrix(Tester t) {
//		System.out.println(s.generateMatrix(2)[1][1]);
		return
		t.checkExpect(s.generateMatrix(1), new int[][]{{1}}) &&
		t.checkExpect(s.generateMatrix(-1), new int[][]{{1}}) &&
		t.checkExpect(s.generateMatrix(2), 
				new int[][]{{1, 2},
							{4, 3}}) &&
		t.checkExpect(s.generateMatrix(4),
				new int[][]{{1, 2, 3},
							{8, 9, 4},
							{7, 6, 5}});
	}
}